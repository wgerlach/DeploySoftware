{
	"QIIME" : {
		"dockerimage" : "qiime:1.8.0-amd64u",
		"commands" : {
			"pick_closed_reference_otus" : {
				"default" : {
					"input" : [ 
							 ["file",	"INPUT-FILE"],
							 ["file",	"INPUT-PARAMETER"],
							 ["string",	"IDENTITY",		"97", 	"description text"],
							 ["string",	"OUTPUT-DIR", 		"ucr", 	"description text"],
							 ["file",	"*array"],
							 ["**dict ; not clear if needed"]
						],
					"output_array" : ["${OUTPUT-DIR}/otu_table.biom"],
					"output_map" : {},
					"cmd_interpreter" : "/bin/bash",
					"cmd_script" : 
						[
						"source /home/qiime/qiime_software/activate.sh",
						"pick_closed_reference_otus.py -i @${INPUT-FILE} -o ${OUTPUT-DIR} -p @${INPUT-PARAMETER} -r /home/qiime/qiime_software/gg_otus-13_8-release/rep_set/${IDENTITY}_otus.fasta"
						],
					"example" : "QIIME.pick_closed_reference_otus(input.fas, param.txt, IDENTITY=90)",
					"example_interface" : "file INPUT-FILE, file INPUT-PARAMETER, number IDENTITY=97, string OUTPUT-DIR=ucr, file *array, **dict"
				}
			}
		}
	},
	"PIRCUSt" : {
		"dockerimage" : "picrust:1.0.0",
		"commands" : {
			"normalize_by_copy_number" : {
				"default" : {
					"input" : 
						[
							["file",	"INPUT", "", "input biom file"]
						],
					"cmd_script" :
						[
						"mkdir -p /usr/local/lib/python2.7/dist-packages/picrust/data/",
						"ln -s /db/16S_13_5_precalculated.tab.gz  /usr/local/lib/python2.7/dist-packages/picrust/data/16S_13_5_precalculated.tab.gz",
						"ln -s /db/ko_13_5_precalculated.tab.gz  /usr/local/lib/python2.7/dist-packages/picrust/data/ko_13_5_precalculated.tab.gz",
						"normalize_by_copy_number.py -i @${INPUT} -o ${OUTPUT-FILE}"
						],
					"output_array" : ["${OUTPUT-FILE}"],
					"variables" : [{ "OUTPUT-FILE" : "${remove_extension:INPUT}.normalized.biom"}],
					"predata": {
                    				"ko_13_5_precalculated.tab.gz":{
                        				"url" : "http://shock.metagenomics.anl.gov:80/node/e91dd6b3-69b0-4e1f-9cb0-1b94fb9864d0?download"
                    				},
						"16S_13_5_precalculated.tab.gz" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/ac5952b4-cb43-410c-b545-8855131df518?download"
						}
					}
				}
			},
			"predict_metagenomes" : {
				"default" : {
					"input" : 
						[
							["file",	"INPUT", "", "normalized input biom file"]
						],
					"cmd_script" :
						[
						"mkdir -p /usr/local/lib/python2.7/dist-packages/picrust/data/",
						"ln -s /db/16S_13_5_precalculated.tab.gz  /usr/local/lib/python2.7/dist-packages/picrust/data/16S_13_5_precalculated.tab.gz",
						"ln -s /db/ko_13_5_precalculated.tab.gz  /usr/local/lib/python2.7/dist-packages/picrust/data/ko_13_5_precalculated.tab.gz",
						"predict_metagenomes.py -i @${INPUT} -o ${OUTPUT-FILE}"
						],
					"output_array" : ["${OUTPUT-FILE}"],
					"variables" : [{ "OUTPUT-FILE" : "${remove_extension:INPUT}.picrust.biom"}],
					"predata": {
                    				"ko_13_5_precalculated.tab.gz":{
                        				"url" : "http://shock.metagenomics.anl.gov:80/node/e91dd6b3-69b0-4e1f-9cb0-1b94fb9864d0?download"
                    				},
						"16S_13_5_precalculated.tab.gz" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/ac5952b4-cb43-410c-b545-8855131df518?download"
						}
					}
				}
			}
		}
	},
	"Emirge" : {
		"dockerimage" : "wgerlach/emirge:0.60",
		"commands" : {
			"emirge" : {
				"default" : {
					"input" : 
						[
							["file",	"INPUT1", 		"", "input biom file"],
							["file",	"INPUT2", 		"", "input biom file"],
							["string",	"insert_mean", 		"180", 	"insert size mean"],
							["string",	"insert_stddev", 	"20", 	"insert standard deviation"],
							["string",	"max_read_length", 	"110", 	"maximal read length"],
							["string",	"processors", 		"1",	"number of processor to use"]
						],
					"cmd_script" :
						[
						"emirge.py outdir -1 ${INPUT1} -2 ${INPUT1} -f /home/ubuntu/data/emirge-data/SSURef_111_candidate_db.fasta -b /home/ubuntu/data/emirge-data/SSU_candidate_db_btindex --insert_mean=${insert_mean} --insert_stddev=${insert_stddev} --max_read_length=${max_read_length} --processors=${processors} --phred33",
						"emirge_rename_fasta.py outdir/iter.40 > emirge.fas"
						],
					"output_array" : ["emirge.fas"],
					"predata": {
                    				"SSU_candidate_db_btindex.1.ebwt":{
                        				"url" : "http://shock.metagenomics.anl.gov:80/node/e401783f-7f9b-486a-ad64-1d8cc8c5e3a6?download"
                    				},
						"SSU_candidate_db_btindex.2.ebwt" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/2ae51a86-2dc3-46cb-8f90-0a6e103cf857?download"
						},
						"SSU_candidate_db_btindex.3.ebwt" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/c6382101-c67d-4f05-b05e-8a863d6c2abb?download"
						},
						"SSU_candidate_db_btindex.4.ebwt" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/490f51f0-5b39-4b93-ba3d-1caadbdd5e54?download"
						},
						"SSU_candidate_db_btindex.rev.1.ebwt" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/e680556c-751a-4a59-b5ad-be20a1614cb2?download"
						},
						"SSU_candidate_db_btindex.rev.2.ebwt" : {
							"url" : "http://shock.metagenomics.anl.gov:80/node/951420f9-4c87-44a7-ac56-c94cd06e2166?download"
						}
					}
				}
			}
		
		}
	}
}
